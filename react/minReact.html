<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <div id="root"></div>
        <script src="./min-react-v1.js"></script>
        <script>
            // 通过babel转成jsx元素
            /** @jsx Didact.createElement */
            const randomLikes = () => Math.ceil(Math.random() * 100);

            const stories = [
                {
                    name: 'Didact introduction',
                    url: 'http://bit.ly/2pX7HNn',
                    likes: randomLikes()
                },
                {
                    name: 'Rendering DOM elements ',
                    url: 'http://bit.ly/2qCOejH',
                    likes: randomLikes()
                },
                {
                    name: 'Element creation and JSX',
                    url: 'http://bit.ly/2qGbw8S',
                    likes: randomLikes()
                },
                {
                    name: 'Instances and reconciliation',
                    url: 'http://bit.ly/2q4A746',
                    likes: randomLikes()
                },
                {
                    name: 'Components and state',
                    url: 'http://bit.ly/2rE16nh',
                    likes: randomLikes()
                }
            ];

            // const appElement = () => <div><ul>{stories.map(storyElement)}</ul></div>;
            const appElement = () =>
                Didact.createElement('div', null, Didact.createElement('ul', null, ...stories.map(storyElement)));

            // function storyElement(story) {
            //     return (
            //         <li>
            //             <button onClick={(e) => handleClick(story)}>
            //                 {story.likes}
            //                 <b>❤️</b>
            //             </button>
            //             <a href={story.url}>{story.name}</a>
            //         </li>
            //     );
            // }
            function storyElement(story) {
                return Didact.createElement(
                    'li',
                    null,
                    Didact.createElement(
                        'button',
                        {
                            onClick: (e) => handleClick(story)
                        },
                        story.likes,
                        Didact.createElement('b', null, '\u2764\uFE0F')
                    ),
                    Didact.createElement(
                        'a',
                        {
                            href: story.url
                        },
                        story.name
                    )
                );
            }

            function handleClick(story) {
                story.likes += 1;
                Didact.render(appElement(), document.getElementById('root'));
            }

            Didact.render(appElement(), document.getElementById('root'));
        </script>
    </body>
</html>
